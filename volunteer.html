<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TOGATHER | Volunteering</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Poppins", sans-serif;
    }

    #background-video {
      position: fixed;
      right: 0;
      bottom: 0;
      min-width: 100%;
      min-height: 100%;
      object-fit: cover;
      z-index: -2;
    }

    #overlay {
      position: fixed;
      top: 0;
      left: 0;
      height: 100%;
      width: 100%;
      background: rgba(0, 0, 0, 0.4);
      z-index: -1;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 50px;
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.3);
    }

    .nav-logo-img {
      width: 120px;
      height: auto;
    }

    nav a {
      margin: 0 15px;
      text-decoration: none;
      color: #fff;
      font-weight: 500;
      transition: color 0.3s;
    }

    nav a:hover {
      color: #00bcd4;
    }

    .container {
      text-align: center;
      color: white;
      margin-top: 120px;
      padding: 40px;
    }

    .container h1 {
      font-size: 3em;
      margin-bottom: 20px;
    }

    .container p {
      max-width: 700px;
      margin: 0 auto 30px;
      font-size: 1.1em;
      line-height: 1.6;
    }

    .btn {
      background: #00bcd4;
      border: none;
      color: white;
      padding: 12px 30px;
      border-radius: 30px;
      font-size: 1em;
      cursor: pointer;
      transition: background 0.3s;
    }

    .btn:hover {
      background: #0194a8;
    }

    .form-section {
      margin: 100px auto;
      width: 90%;
      max-width: 500px;
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      padding: 40px;
      border-radius: 15px;
      color: white;
      text-align: center;
    }

    .form-section h2 {
      margin-bottom: 20px;
    }

    .form-section input,
    .form-section textarea {
      width: 100%;
      margin: 10px 0;
      padding: 12px;
      border: none;
      border-radius: 25px;
      outline: none;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      font-size: 1em;
    }

    .form-section input::placeholder,
    .form-section textarea::placeholder {
      color: rgba(255, 255, 255, 0.7);
    }

    .form-section input[type="submit"] {
      background: #00bcd4;
      cursor: pointer;
      transition: background 0.3s;
    }

    .form-section input[type="submit"]:hover {
      background: #0194a8;
    }

    .certificate-section {
      margin: 100px auto;
      width: 90%;
      max-width: 800px;
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      padding: 40px;
      border-radius: 15px;
      color: white;
      text-align: center;
    }

    .certificate-section h2 {
      margin-bottom: 20px;
      color: #00bcd4;
    }

    .certificate-section p {
      margin-bottom: 25px;
      line-height: 1.6;
    }

    .certificate-container {
      position: relative;
      margin: 25px 0;
      display: inline-block;
    }

    .certificate-template {
      width: 100%;
      max-width: 600px;
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }

    .certificate-name {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 2em;
      font-weight: bold;
      color: #03396c;
      text-align: center;
      width: 80%;
    }

    .certificate-input {
      width: 100%;
      max-width: 400px;
      margin: 25px 0 15px 0;
      padding: 12px;
      border: none;
      border-radius: 25px;
      outline: none;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      font-size: 1em;
      text-align: center;
    }

    .certificate-input::placeholder {
      color: rgba(255, 255, 255, 0.7);
    }

    .download-btn {
      background: #28a745;
      border: none;
      color: white;
      padding: 12px 30px;
      border-radius: 30px;
      font-size: 1em;
      cursor: pointer;
      transition: background 0.3s;
      margin-top: 10px;
    }

    .download-btn:hover {
      background: #218838;
    }

    .download-btn:disabled {
      background: #6c757d;
      cursor: not-allowed;
    }

    .loading {
      display: none;
      color: #00bcd4;
      margin-top: 10px;
    }

    .success-message {
      display: none;
      color: #28a745;
      margin-top: 10px;
      font-weight: bold;
    }

    #loginPopup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255,255,255,0.95);
      padding: 30px 40px;
      border-radius: 15px;
      box-shadow: 0 0 20px rgba(0,0,0,0.3);
      text-align: center;
      z-index: 1000;
    }

    #loginPopup h3 {
      margin-bottom: 20px;
      color: #333;
    }

    #loginPopup a {
      display: inline-block;
      margin: 10px;
      padding: 10px 20px;
      background: #00bcd4;
      color: white;
      border-radius: 8px;
      text-decoration: none;
    }

    #loginPopup a:hover {
      background: #0194a8;
    }

    #loginPopup button {
      margin-top: 10px;
      border: none;
      background: transparent;
      color: #666;
      cursor: pointer;
      font-size: 0.9em;
    }

    footer {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      color: white;
      display: flex;
      justify-content: space-around;
      padding: 30px 0;
      flex-wrap: wrap;
      border-top: 1px solid rgba(255, 255, 255, 0.3);
      margin-top: 40px;
    }

    .col {
      flex: 1 1 200px;
    }

    .col h3 {
      margin-bottom: 15px;
      font-size: 1.2rem;
      border-left: 4px solid #00bfff;
      padding-left: 8px;
    }

    .col p,
    .col a {
      color: #ddd;
      font-size: 0.95rem;
      margin-bottom: 8px;
      display: block;
      text-decoration: none;
    }

    .col a:hover {
      color: #00bfff;
    }

    .social-icons i {
      margin: 10px;
      cursor: pointer;
      font-size: 18px;
    }

    .social-icons i:hover { color: #00bcd4; }

    @media (max-width: 770px) {
      header { flex-direction: column; padding: 15px 20px; }
      nav { display: flex; flex-wrap: wrap; justify-content: center; margin-top: 10px; }
      nav a { margin: 8px; }
      footer { flex-direction: column; text-align: center; }
      .certificate-name { font-size: 1.5em; }
    }
  </style>
</head>

<body>
  <video autoplay muted loop id="background-video">
    <source src="Sea.mp4" type="video/mp4" />
  </video>
  <div id="overlay"></div>

  <header>
    <div class="nav-logo">
      <img src="Logo.png" alt="TOGATHER Logo" class="nav-logo-img">
    </div>
    <nav>
      <a href="index.html">Home</a>
      <a href="About.html">About</a>
      <a href="newss.html">News</a>
      <a href="volunteer.html">Volunteer</a>
      <a href="donate.html">Donate</a>
      <a href="tracker.html">Tracker</a>
      <a href="feedback.html">Feedback</a>
      <a href="login.html"><i class="fas fa-user"></i></a>
    </nav>
  </header>

  <div class="container" id="home">
    <h1>Become a Volunteer</h1>
    <p>
      Volunteering gives you the opportunity to change people's lives — including your own.
      It gives you the satisfaction of playing a role in someone else's life by helping those
      who may not be able to help themselves.
    </p>
    <button class="btn" onclick="document.querySelector('#volunteer-form').scrollIntoView({behavior: 'smooth'})">
      Join Now
    </button>
  </div>

  <div class="form-section" id="volunteer-form">
    <h2>Become a Volunteer</h2>
    <form id="volunteerForm">
      <input type="text" placeholder="Full Name" required />
      <input type="email" placeholder="Email Address" required />
      <input type="text" placeholder="City / Country" required />
      <textarea rows="4" placeholder="Why do you want to volunteer?" required></textarea>
      <input type="submit" value="Submit Application" />
    </form>
  </div>

  <div class="certificate-section" id="certificate-section">
    <h2>Get Your Volunteer Certificate</h2>
    <p>Download a personalized certificate to recognize your commitment to environmental conservation.</p>
    
    <div class="certificate-container">
      <img src="certificate.png" alt="Certificate Template" class="certificate-template" id="certificateImg">
      <div class="certificate-name" id="certificateName">Your Name</div>
    </div>

    <input type="text" class="certificate-input" id="certificateInput" placeholder="Enter your full name" />
    <br>
    <button class="download-btn" id="downloadBtn" onclick="downloadCertificate()" disabled>Download Certificate</button>
    <div class="loading" id="loadingText">Generating certificate...</div>
    <div class="success-message" id="successMessage">✓ Certificate downloaded successfully!</div>
  </div>

  <div id="loginPopup">
    <h3>You must have an account to apply!</h3>
    <a href="login.html">Log In</a>
    <a href="signup.html">Sign Up</a><br>
    <button onclick="closePopup()">Close</button>
  </div>

  <footer>
    <div class="col">
      <img src="Logo.png" class="logo" width="150" alt="TOGATHER Logo">
    </div>
    <div class="col">
      <h3>Office</h3>
      <p>Beirut, Lebanon</p>
      <p class="email-id">Togather@outlook.com</p>
    </div>
    <div class="col">
      <h3>Contact</h3>
      <p>+961 71 234 567</p>
      <p>+961 71 987 654</p>
    </div>
    <div class="col">
      <h3>Follow Us</h3>
      <div class="social-icons">
        <i class="fab fa-facebook-f"></i>
        <i class="fab fa-instagram"></i>
        <i class="fab fa-twitter"></i>
        <i class="fab fa-linkedin-in"></i>
      </div>
    </div>
  </footer>
  
  <script>
    const form = document.getElementById("volunteerForm");
    const popup = document.getElementById("loginPopup");
    const isLoggedIn = localStorage.getItem("loggedIn") === "true";
    const certificateInput = document.getElementById("certificateInput");
    const certificateName = document.getElementById("certificateName");
    const downloadBtn = document.getElementById("downloadBtn");
    const loadingText = document.getElementById("loadingText");
    const successMessage = document.getElementById("successMessage");

// Load image with full CORS support
let certificateBaseImage = new Image();
certificateBaseImage.crossOrigin = "anonymous"; 
certificateBaseImage.src = "certificate.png";

certificateInput.addEventListener("input", () => {
  const name = certificateInput.value.trim();
  certificateName.textContent = name || "Your Name";
  downloadBtn.disabled = !name;
});

downloadBtn.addEventListener("click", downloadCertificate);

function downloadCertificate() {
  const name = certificateInput.value.trim();
  if (!name) return;

  loadingText.style.display = "block";
  successMessage.style.display = "none";
  downloadBtn.disabled = true;

  if (!certificateBaseImage.complete) {
    certificateBaseImage.onload = () => generateCanvas(name);
  } else {
    generateCanvas(name);
  }
}

function generateCanvas(name) {
  const canvas = document.createElement("canvas");
  const ctx = canvas.getContext("2d");

  canvas.width = certificateBaseImage.width;
  canvas.height = certificateBaseImage.height;

  ctx.drawImage(certificateBaseImage, 0, 0);

  // Load proper font so text appears correctly
  const font = new FontFace(
    "Poppins",
    "url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLPTucHtA.woff2)"
  );

  font.load().then(loaded => {
    document.fonts.add(loaded);

    ctx.font = "bold 60px Poppins";
    ctx.fillStyle = "#03396c";
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";

    ctx.fillText(name.toUpperCase(), canvas.width / 2, canvas.height / 2);

    // SAFE download (no corruption)
    canvas.toBlob(blob => {
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = `Certificate_${name.replace(/\s+/g, "_")}.png`;
      a.click();
      URL.revokeObjectURL(url);

      loadingText.style.display = "none";
      successMessage.style.display = "block";
      downloadBtn.disabled = false;
    });
  });
}
</script>

</body>
</html>